---
marp: true
theme: gaia
footer: ''
paginate: true
size: 16:9
math: katex
---

# 流类型
1. `iostream`:用于读写流的基本类型
2. `fstream`:读写命名文件的类型
3. `sstream``:读写内存`string`对象的类型

# IO对象无拷贝或赋值
不能将形参或返回类型设置为流类型，通常以引用方式传递和返回流，传递和返回的引用不能是`const`

# 条件状态

# 管理输出缓冲
|操作符|作用|
|:-|:-|
|`endl`|输出一个换行符，然后刷新缓冲区|
|`flush`|刷新缓冲区，不附加任何额外字符|
|`ends`|输出一个空字符，然后刷新缓冲区|

## `unitbuf`操作符
告诉流接下来的每次写操作之后都进行一次`flush`操作。`nounitbuf`操作符来重置。
```
cout << unitbuf; //所有输出操作后都会立即刷新缓冲区
//任何输出都立即刷新，无缓冲
cout << nounitbuf;//回到正常的缓冲方式
```

**如果程序异常终止，输出缓冲区是不会被刷新的**

## 关联输入输出流
当一个输入流被关联到一个输出流时，任何试图从输入流读取数据的操作都会先刷新关联的输出流。

交互式系统通常应该关联输入流和输出流。

## 成员函数`tie`
返回指向输出流的指针。

1. 不带参数：本对象关联到一个输出流，则返回指向这个流的指针。如果没有关联到流，返回空指针。
2. 带一个参数：接受一个指向`ostream`的指针，将自己关联到此`ostream`

每个流最多关联到一个流，但多个流可以关联到同一个`ostream`

# 文件流对象
## 成员函数`open`和`close`
调用`open`可能失败，进行`open`是否成功的检测通常是一个好习惯

对一个已经打开的文件流调用`open`会失败，必须首先关闭已经关联的文件。

当一个`fstream`对象离开其作用域时，与之关联的文件会自动关闭。（即：当一个`fstream`对象被销毁时，`close`会自动调用）

## 文件模式
默认情况下，当我们打开一个`ofstream`时，文件的内容会被丢弃。阻止一个`ofstream`清空给定文件内容的方法是同时指定`app`模式。

**保留被`fostream`打开的文件中已有数据的唯一方法是显式指定`app`或`in`模式**

app：append模式，每次写操作前均定位到文件末尾
trunc：截断文件

```
ofstream app("file2", ofstream::app);
```

通常情况下，`out`模式意味着同时使用`trunc`模式。

# `string`流
对整行文本进行处理，而其他一些工作是处理行内的单个单词时，通常使用`istringstream`。
*将每一行读进来创建`istringstream`对象，然后再从这个对象里面读*

当我们逐步构造输出，希望最后一期打印时，`ostringstream`很有用。
*先将内容写入到`ostringstream`，最后打印这里面的内容*


